function loadWidget(e){let t,{waifuPath:i,apiPath:o,cdnPath:a}=e,s=!1;if("string"==typeof a)s=!0,a.endsWith("/")||(a+="/");else{if("string"!=typeof o)return void console.error("Invalid initWidget argument!");o.endsWith("/")||(o+="/")}function n(e){return Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e}localStorage.removeItem("waifu-display"),sessionStorage.removeItem("waifu-text"),document.body.insertAdjacentHTML("beforeend",'\n    <div id="waifu"><div id="waifu-tips"></div><canvas id="live2d"width="400"height="800"></canvas></div>'),setTimeout((()=>{document.getElementById("waifu").style.bottom="10px"}),0);let l,d,c=!1,g=["好久不见，日子过得好快呢……","大坏蛋！你都多久没理人家了呀，嘤嘤嘤～","嗨～快来逗我玩吧！","拿小拳拳锤你胸口！","记得把小家加入 Adblock 白名单哦！"];function u(e,t,i){if(!e||sessionStorage.getItem("waifu-text")&&sessionStorage.getItem("waifu-text")>i)return;d&&(clearTimeout(d),d=null),e=n(e),sessionStorage.setItem("waifu-text",i);const o=document.getElementById("waifu-tips");o.innerHTML=e,o.classList.add("waifu-tips-active"),d=setTimeout((()=>{sessionStorage.removeItem("waifu-text"),o.classList.remove("waifu-tips-active")}),t)}async function r(){const e=await fetch(`${a}model_list.json`);t=await e.json()}async function m(e,i,l){if(localStorage.setItem("modelId",e),localStorage.setItem("modelTexturesId",i),u(l,4e3,10),s){t||await r();const i=n(t.models[e]);loadlive2d("live2d",`${a}model/${i}/index.json`)}else loadlive2d("live2d",`${o}get/?id=${e}-${i}`),console.log(`Live2D模型${e}-${i}加载完成`)}async function f(){let e=localStorage.getItem("modelId");if(s){t||await r();const i=++e>=t.models.length?0:e;m(i,0,t.messages[i])}else fetch(`${o}switch/?id=${e}`).then((e=>e.json())).then((e=>{m(e.model.id,0,e.model.message)}))}window.addEventListener("mousemove",(()=>c=!0)),window.addEventListener("keydown",(()=>c=!0)),setInterval((()=>{c?(c=!1,clearInterval(l),l=null):l||(l=setInterval((()=>{u(n(g),6e3,9)}),2e4))}),1e3),function(){document.getElementById("waifu-toggle_switch").addEventListener("click",f),document.getElementById("waifu-toggle_photo").addEventListener("click",(()=>{u("照好了嘛，是不是很可爱呢？",6e3,9),Live2D.captureName="photo.png",Live2D.captureFrame=!0})),document.getElementById("waifu-toggle_off").addEventListener("click",(()=>{localStorage.setItem("waifu-display",Date.now()),u("愿你有一天能与重要的人重逢。",2e3,11),document.getElementById("waifu").style.bottom="-500px";const e=document.getElementById("waifu-toggle"),t=document.getElementById("waifu-toggle_switch"),i=document.getElementById("waifu-toggle_photo"),o=document.getElementById("waifu-toggle_off");setTimeout((()=>{document.getElementById("waifu").style.display="none",e.classList.add("waifu-toggle-active"),i.classList.remove("waifu-toggle-active"),o.classList.remove("waifu-toggle-active"),t.classList.remove("waifu-toggle-active")}),3e3)}));const e=()=>{};console.log("%c",e),e.toString=()=>{u("哈哈，你打开了控制台，是想要看看我的小秘密吗？",6e3,9)},window.addEventListener("copy",(()=>{u("你都复制了些什么呀，转载要记得加上出处哦！",6e3,9)})),window.addEventListener("visibilitychange",(()=>{document.hidden||u("哇，你终于回来了～",6e3,9)}))}(),function(){let e;if("/"===location.pathname){const t=(new Date).getHours();e=t>5&&t<=7?"早上好！一日之计在于晨，美好的一天就要开始了。":t>7&&t<=11?"上午好！工作顺利嘛，不要久坐，多起来走动走动哦！":t>11&&t<=13?"中午了，工作了一个上午，现在是午餐时间！":t>13&&t<=17?"午后很容易犯困呢，今天的运动目标完成了吗？":t>17&&t<=19?"傍晚了！窗外夕阳的景色很美丽呢，最美不过夕阳红～":t>19&&t<=21?"晚上好，今天过得怎么样？":t>21&&t<=23?["已经这么晚了呀，早点休息吧，晚安～","深夜时要爱护眼睛呀！"]:"你是夜猫子呀？这么晚还不睡觉，明天起的来嘛？"}else if(""!==document.referrer){const t=new URL(document.referrer),i=t.hostname.split(".")[1];e=location.hostname===t.hostname?`欢迎阅读<span>「${document.title.split(" - ")[0]}」</span>`:"baidu"===i?`Hello！来自百度搜索的朋友<br>你是搜索<span>${t.search.split("&wd=")[1].split("&")[0]}</span>找到的我吗？`:"so"===i?`Hello！来自360搜索的朋友<br>你是搜索<span>${t.search.split("&q=")[1].split("&")[0]}</span>找到的我吗？`:"google"===i?`Hello！来自谷歌搜索的朋友<br>欢迎阅读<span>「${document.title.split(" - ")[0]}」</span>`:`Hello！来自<span>${t.hostname}</span>的朋友`}else e=`欢迎阅读<span>「${document.title.split(" - ")[0]}」</span>`;u(e,7e3,8)}(),function(){let e=localStorage.getItem("modelId"),t=localStorage.getItem("modelTexturesId");null===e&&(e=0,t=0),m(e,t),fetch(i).then((e=>e.json())).then((e=>{window.addEventListener("mouseover",(t=>{for(let{selector:i,text:o}of e.mouseover)if(t.target.matches(i))return o=n(o),o=o.replace("{text}",t.target.innerText),void u(o,4e3,8)})),window.addEventListener("click",(t=>{for(let{selector:i,text:o}of e.click)if(t.target.matches(i))return o=n(o),o=o.replace("{text}",t.target.innerText),void u(o,4e3,8)})),e.seasons.forEach((({date:e,text:t})=>{const i=new Date,o=e.split("-")[0],a=e.split("-")[1]||o;o.split("/")[0]<=i.getMonth()+1&&i.getMonth()+1<=a.split("/")[0]&&o.split("/")[1]<=i.getDate()&&i.getDate()<=a.split("/")[1]&&(t=(t=n(t)).replace("{year}",i.getFullYear()),g.push(t))}))}))}()}function initWidget(e,t){"string"==typeof e&&(e={waifuPath:e,apiPath:t}),document.body.insertAdjacentHTML("beforeend",'<div id="waifu-toggle_switch" class="waifu-toggle-active"><span>Switch</span></div><div id="waifu-toggle_photo" class="waifu-toggle-active"><span>Photo</span></div> <div id="waifu-toggle_off" class="waifu-toggle-active"><span>ShutOff</span> </div><div id="waifu-toggle"><span>看板娘</span></div>');const i=document.getElementById("waifu-toggle"),o=document.getElementById("waifu-toggle_switch"),a=document.getElementById("waifu-toggle_photo"),s=document.getElementById("waifu-toggle_off");i.addEventListener("click",(()=>{i.classList.remove("waifu-toggle-active"),o.classList.add("waifu-toggle-active"),a.classList.add("waifu-toggle-active"),s.classList.add("waifu-toggle-active"),i.getAttribute("first-time")?(loadWidget(e),i.removeAttribute("first-time")):(localStorage.removeItem("waifu-display"),document.getElementById("waifu").style.display="",setTimeout((()=>{document.getElementById("waifu").style.bottom="10px"}),0))})),localStorage.getItem("waifu-display")&&Date.now()-localStorage.getItem("waifu-display")<=864e5?(i.setAttribute("first-time",!0),setTimeout((()=>{i.classList.add("waifu-toggle-active"),o.classList.remove("waifu-toggle-active"),a.classList.remove("waifu-toggle-active"),s.classList.remove("waifu-toggle-active")}),0)):loadWidget(e)}